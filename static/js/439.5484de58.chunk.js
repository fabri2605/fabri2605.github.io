(self.webpackChunkmusic_page=self.webpackChunkmusic_page||[]).push([[439],{1588:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var a=n(8214),s=n(7762),r=n(5861),o=n(885),c=n(2791),l="SongComp_general__VT5+V",i="SongComp_filter__6atGf",u="SongComp_loading__KkBii",d="SongComp_cartel__yhk3Z",f="SongComp_title__hNtHG",m="SongComp_artist__w7JTi",h="SongComp_spol__kAthA",g="MyExtra_pulse__LGq6h",p=n(184),_=function(){return(0,p.jsx)("div",{className:g})},v=function(e){var t=document.getElementsByClassName("player"),n=c.useState(!1),a=(0,o.Z)(n,2),r=a[0],l=a[1];return(0,p.jsxs)("div",{className:d,children:[(0,p.jsx)("p",{className:"numbers",children:function(e){var t=Math.floor(e/60%60),n=e%60;return(t=t<10?"0"+t:t)+":"+(n=n<10?"0"+Math.floor(n):Math.floor(n))}(e.song.duration)}),(0,p.jsx)("img",{onClick:function(n){var a,r=(0,s.Z)(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.id===e.song.name?o.play():o.pause()}}catch(c){r.e(c)}finally{r.f()}},alt:e.song.name,src:e.song.img}),r&&(0,p.jsx)(_,{}),(0,p.jsx)("h3",{className:f,children:e.song.name}),(0,p.jsx)("a",{href:e.song.authorUrl,children:(0,p.jsx)("h5",{className:m,children:e.song.author})}),(0,p.jsx)("div",{className:h,children:(0,p.jsx)("a",{href:e.song.url.spotify,children:"Listen it on Spoltify!"})}),(0,p.jsx)("audio",{onPause:function(t){l(!document.getElementById(e.song.name).paused)},id:e.song.name,className:"player",onPlay:function(n){l(!document.getElementById(e.song.name).paused);var a,r=(0,s.Z)(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.volume=.1,o.id===e.song.name?o.setAttribute("controls",""):(o.pause(),o.removeAttribute("controls"))}}catch(c){r.e(c)}finally{r.f()}},children:(0,p.jsx)("source",{src:e.song.preview,type:"audio/mpeg"})})]})},x="Register_myform__LHHj7",j="Register_user__6htIS",b="Register_pass__RQlWb",y="Register_submit__8oVmK",N="Register_seePass__i0VV+",S=n(9704),k=n.n(S),Z=n(3071),L=function(e){var t=c.useState(""),n=(0,o.Z)(t,2),s=n[0],l=n[1],i=c.useState(""),u=(0,o.Z)(i,2),d=u[0],f=u[1],m=c.useState(!1),h=(0,o.Z)(m,2),g=h[0],_=h[1],v=c.useState(!1),S=(0,o.Z)(v,2),L=S[0],w=S[1],C=c.useState(!1),I=(0,o.Z)(C,2),A=I[0],B=I[1],R=c.useState(""),P=(0,o.Z)(R,2),E=P[0],F=P[1],H=(k().enc.Utf8.parse("b75524255a7f54d2726a951bb39204df"),k().enc.Utf8.parse("1583288699248111"),function(){var t=(0,r.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w(!0),n.preventDefault(),!T||!V){t.next=7;break}return t.next=5,fetch("https://react-http-467cc-default-rtdb.firebaseio.com/users.json").then((function(e){return e.json()})).then((function(t){var n=!1;for(var a in t)if(t[a].Name===s){if(t[a].Password!==d)return F("Incorrect password!"),null;e.submitionHandler(s,d,!0),n=!0}n||e.submitionHandler(s,d,!1)}));case 5:t.next=8;break;case 7:F("Please complete the login!");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),T=s.length>3,V=d.length>3;return(0,p.jsxs)("form",{onSubmit:H,className:x,children:[(0,p.jsxs)("div",{className:j,children:[(0,p.jsx)("label",{children:"Username:"}),(0,p.jsx)("input",{type:"text",onBlur:function(){w(!0)},onChange:function(e){l(e.target.value.trim())},value:s})]}),(0,p.jsxs)("div",{className:b,children:[(0,p.jsx)("label",{children:"Password:"}),(0,p.jsxs)("div",{className:N,children:[(0,p.jsx)("input",{type:g?"text":"password",onBlur:function(){B(!0)},onChange:function(e){k().AES.encrypt(e.target.value.trim(),"PASSWORD");f(e.target.value.trim())},value:d}),(0,p.jsx)("div",{children:g?(0,p.jsx)(Z.tjB,{onClick:function(){return _((function(e){return!e}))},color:"white"}):(0,p.jsx)(Z.z5B,{onClick:function(){return _((function(e){return!e}))},color:"white"})})]})]}),(0,p.jsx)("button",{type:"submit",className:y,children:"Register"}),!T&&L&&(0,p.jsx)("p",{children:"Invalid username!"}),!V&&T&&A&&(0,p.jsx)("p",{children:"Invalid password!"}),E&&(0,p.jsx)("p",{children:E})]})},w="myLoader_myBody__TZD4h",C="myLoader_middle__-w0va",I="myLoader_bar__LVQo4",A="myLoader_bar1__qzEFa",B="myLoader_bar2__ZdA2q",R="myLoader_bar3__obKST",P="myLoader_bar4__9neVb",E="myLoader_bar5__0nTCb",F="myLoader_bar6__8e5NQ",H="myLoader_bar7__j37xO",T="myLoader_bar8__IJtFL",V=function(){return(0,p.jsx)("div",{className:w,children:(0,p.jsxs)("div",{className:C,children:[(0,p.jsx)("div",{className:"".concat(I," ").concat(A)}),(0,p.jsx)("div",{className:"".concat(I," ").concat(B)}),(0,p.jsx)("div",{className:"".concat(I," ").concat(R)}),(0,p.jsx)("div",{className:"".concat(I," ").concat(P)}),(0,p.jsx)("div",{className:"".concat(I," ").concat(E)}),(0,p.jsx)("div",{className:"".concat(I," ").concat(F)}),(0,p.jsx)("div",{className:"".concat(I," ").concat(H)}),(0,p.jsx)("div",{className:"".concat(I," ").concat(T)})]})})},D={nav:"Nav_nav__GD5Vv",logo:"Nav_logo__lDi5E",fetchbutton:"Nav_fetchbutton__u8ra+",logout:"Nav_logout__yBYFC",navButtons:"Nav_navButtons__JKysL"},G=function(e){var t=c.createRef();return(0,p.jsxs)("nav",{className:e.loading?D.loading+" "+D.nav:D.nav,children:[(0,p.jsx)("p",{ref:t,className:D.logo,children:"French Drillin"}),e.user?(0,p.jsxs)("div",{className:D.navButtons,children:[(0,p.jsx)("button",{className:D.fetchbutton,onClick:e.fetching,children:"Load Songs"}),(0,p.jsx)("button",{onClick:e.logoutHandler,className:D.logout,children:"Log Out"})]}):(0,p.jsx)("button",{onClick:e.showForm,className:D.fetchbutton,children:"Register / Login"})]})},K=n(1830),O=n.n(K),U=function(){var e=c.useState(!1),t=(0,o.Z)(e,2),n=t[0],d=t[1],f=c.useState(localStorage.getItem("isLogged")),m=(0,o.Z)(f,2),h=m[0],g=m[1],_=c.useState([]),x=(0,o.Z)(_,2),j=x[0],b=x[1],y=c.useState([]),N=(0,o.Z)(y,2),S=N[0],k=N[1],Z=c.useState([]),w=(0,o.Z)(Z,2),C=w[0],I=w[1],A=c.useState(!1),B=(0,o.Z)(A,2),R=B[0],P=B[1],E=c.useState(""),F=(0,o.Z)(E,2),H=F[0],T=F[1],D=localStorage.getItem("isLogged"),K=localStorage.getItem("filtred"),U=c.useCallback((0,r.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(!1),D){e.next=8;break}return k(""),localStorage.setItem("filtred",""),T("You need to register first!"),e.abrupt("return",null);case 8:if(!(j.length>0&&0===S.length)){e.next=13;break}return k(j),e.abrupt("return",null);case 13:if(!(S.length>0&&j.length>0)){e.next=16;break}return k(K?j.filter((function(e){return e.author===K})):j),e.abrupt("return",null);case 16:return d(!1),P(!0),t={method:"GET",headers:{"X-RapidAPI-Key":"8cc775c702msheb62061cb0adb6fp1957fcjsna06b77403272","X-RapidAPI-Host":"spotify23.p.rapidapi.com"}},e.next=21,fetch("https://spotify23.p.rapidapi.com/playlist_tracks/?id=37i9dQZF1DX4Wsb4d7NKfP&offset=0&limit=100",t).then((function(e){return e.json()})).then((function(e){console.log(e);var t=[],n=[];for(var a in e)if("items"===a){var r,o=(0,s.Z)(e[a]);try{for(o.s();!(r=o.n()).done;){var c=r.value;c.track&&(t.push({id:c.track.id,name:c.track.name,authorUrl:c.track.artists[0].uri,author:c.track.artists[0].name,preview:c.track.preview_url,img:c.track.album.images[0].url,url:c.track.external_urls,duration:.001*c.track.duration_ms}),n.push(c.track.artists[0].name))}}catch(i){o.e(i)}finally{o.f()}}var l=[];n.sort(),n.forEach((function(e){l.indexOf(e)<0&&l.push(e)})),I(l),b(t),"All"!==K&&K?k(t.filter((function(e){return e.author===K}))):(console.log('localFilter == All || ""'),k(t))}));case 21:P(!1);case 22:case"end":return e.stop()}}),e)}))),[h,K,j]);function J(){return(J=(0,r.Z)((0,a.Z)().mark((function e(t,n,s){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(!0),d(!1),T(""),s){e.next=16;break}return r={Name:t,Password:n},e.prev=5,e.next=8,fetch("https://react-http-467cc-default-rtdb.firebaseio.com/users.json",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0.message);case 13:O().fire("Registered succesfully!","Hope you enjoy the page!","success"),e.next=17;break;case 16:O().fire("Welcome back "+t+" !","Logged succesfully!","success");case 17:g(t),localStorage.setItem("isLogged",t),P(!1);case 20:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}c.useEffect((function(){D===!!h&&g(D),K&&U()}),[]);return(0,p.jsxs)(c.Fragment,{children:[(0,p.jsx)(G,{loading:R,fetching:U,showForm:function(){d(!0)},logoutHandler:function(){g(""),k([]),localStorage.setItem("isLogged",""),localStorage.setItem("filtred",""),O().fire("Good bye!","Logged out succesfully!")},user:h}),n?(0,p.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,p.jsx)(L,{submitionHandler:function(e,t,n){return J.apply(this,arguments)}})}):(0,p.jsxs)("div",{className:R?u:"white-p",children:[S.length>0&&h&&(0,p.jsxs)("div",{className:i,children:[(0,p.jsx)("label",{children:"Filter by artist:"}),(0,p.jsxs)("select",{onChange:function(e){if("All"===e.target.value)k(j),localStorage.setItem("filtred","");else{var t=j.filter((function(t){return t.author===e.target.value}));k(t),localStorage.setItem("filtred",e.target.value)}},children:[(0,p.jsx)("option",{value:"All",children:"All"},"All"),C.map((function(e){return(0,p.jsx)("option",{value:e,children:e},e)}))]})]}),R&&!H&&(0,p.jsx)("div",{children:(0,p.jsx)(V,{})}),!H&&0===S.length&&!R&&!n&&(0,p.jsx)("p",{style:{margin:"80px"},children:"Songs list is empty, load to see them all!"}),H&&(0,p.jsx)("p",{children:H}),(0,p.jsx)("div",{className:l,children:!R&&!n&&S.length>0&&h&&S.map((function(e){return(0,p.jsx)(v,{song:e},e.id)}))})]})]})}},2480:function(){}}]);
//# sourceMappingURL=439.5484de58.chunk.js.map
(self.webpackChunkmusic_page=self.webpackChunkmusic_page||[]).push([[191],{9440:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return G}});var n=a(8214),r=a(7762),s=a(5861),o=a(885),c=a(2791),l="SongComp_general__VT5+V",i="SongComp_filter__6atGf",u="SongComp_loading__KkBii",d="SongComp_cartel__yhk3Z",f="SongComp_title__hNtHG",m="SongComp_artist__w7JTi",h="SongComp_spol__kAthA",g="SongComp_myform__JGVhP",p="MyExtra_pulse__LGq6h",_=a(184),v=function(){return(0,_.jsx)("div",{className:p})},x=function(e){var t=document.getElementsByClassName("player"),a=c.useState(!1),n=(0,o.Z)(a,2),s=n[0],l=n[1];return(0,_.jsxs)("div",{className:d,children:[(0,_.jsx)("p",{className:"numbers",children:function(e){var t=Math.floor(e/60%60),a=e%60;return(t=t<10?"0"+t:t)+":"+(a=a<10?"0"+Math.floor(a):Math.floor(a))}(e.song.duration)}),(0,_.jsx)("img",{onClick:function(a){var n,s=(0,r.Z)(t);try{for(s.s();!(n=s.n()).done;){var o=n.value;o.id===e.song.name?o.play():o.pause()}}catch(c){s.e(c)}finally{s.f()}},alt:e.song.name,src:e.song.img}),s&&(0,_.jsx)(v,{}),(0,_.jsx)("h3",{className:f,children:e.song.name}),(0,_.jsx)("a",{href:e.song.authorUrl,children:(0,_.jsx)("h5",{className:m,children:e.song.author})}),(0,_.jsx)("div",{className:h,children:(0,_.jsx)("a",{href:e.song.url.spotify,children:"Listen it on Spoltify!"})}),(0,_.jsx)("audio",{onPause:function(t){l(!document.getElementById(e.song.name).paused)},id:e.song.name,className:"player",onPlay:function(a){l(!document.getElementById(e.song.name).paused);var n,s=(0,r.Z)(t);try{for(s.s();!(n=s.n()).done;){var o=n.value;o.volume=.1,o.id===e.song.name?o.setAttribute("controls",""):(o.pause(),o.removeAttribute("controls"))}}catch(c){s.e(c)}finally{s.f()}},children:(0,_.jsx)("source",{src:e.song.preview,type:"audio/mpeg"})})]})},b=a(9704),j=a.n(b),y=function(e){var t=c.useState(""),a=(0,o.Z)(t,2),r=a[0],l=a[1],i=c.useState(""),u=(0,o.Z)(i,2),d=u[0],f=u[1],m=c.useState(!1),h=(0,o.Z)(m,2),p=h[0],v=h[1],x=c.useState(!1),b=(0,o.Z)(x,2),y=b[0],S=b[1],N=c.useState(!1),k=(0,o.Z)(N,2),Z=k[0],L=k[1],w=(j().enc.Utf8.parse("b75524255a7f54d2726a951bb39204df"),j().enc.Utf8.parse("1583288699248111"),function(){var t=(0,s.Z)((0,n.Z)().mark((function t(a){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v(!0),a.preventDefault(),!C||!I){t.next=5;break}return t.next=5,fetch("https://react-http-467cc-default-rtdb.firebaseio.com/users.json").then((function(e){return e.json()})).then((function(t){var a=!1;for(var n in t)if(t[n].Name===r){if(t[n].Password!==d)return L(!0),null;e.submitionHandler(r,d,!0),a=!0}a||e.submitionHandler(r,d,!1)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),C=r.length>3,I=d.length>3;return(0,_.jsxs)("form",{onSubmit:w,className:g,children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{children:"Username:"}),(0,_.jsx)("input",{type:"text",onBlur:function(){v(!0)},onChange:function(e){l(e.target.value.trim())},value:r})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)("label",{children:"Password:"}),(0,_.jsx)("input",{type:"password",onBlur:function(){S(!0)},onChange:function(e){j().AES.encrypt(e.target.value.trim(),"PASSWORD");f(e.target.value.trim())},value:d})]}),(0,_.jsx)("button",{type:"submit",children:"Register"}),!C&&p&&(0,_.jsx)("p",{children:"Invalid username!"}),!I&&C&&y&&(0,_.jsx)("p",{children:"Invalid password!"}),Z&&(0,_.jsx)("p",{children:"User already in use || incorrect password!"})]})},S="myLoader_myBody__TZD4h",N="myLoader_middle__-w0va",k="myLoader_bar__LVQo4",Z="myLoader_bar1__qzEFa",L="myLoader_bar2__ZdA2q",w="myLoader_bar3__obKST",C="myLoader_bar4__9neVb",I="myLoader_bar5__0nTCb",A="myLoader_bar6__8e5NQ",P="myLoader_bar7__j37xO",F="myLoader_bar8__IJtFL",E=function(){return(0,_.jsx)("div",{className:S,children:(0,_.jsxs)("div",{className:N,children:[(0,_.jsx)("div",{className:"".concat(k," ").concat(Z)}),(0,_.jsx)("div",{className:"".concat(k," ").concat(L)}),(0,_.jsx)("div",{className:"".concat(k," ").concat(w)}),(0,_.jsx)("div",{className:"".concat(k," ").concat(C)}),(0,_.jsx)("div",{className:"".concat(k," ").concat(I)}),(0,_.jsx)("div",{className:"".concat(k," ").concat(A)}),(0,_.jsx)("div",{className:"".concat(k," ").concat(P)}),(0,_.jsx)("div",{className:"".concat(k," ").concat(F)})]})})},B={nav:"Nav_nav__GD5Vv",logo:"Nav_logo__lDi5E",fetchbutton:"Nav_fetchbutton__u8ra+",user:"Nav_user__IPIXZ",logout:"Nav_logout__yBYFC"},H=function(e){var t=c.createRef();return(0,_.jsxs)("nav",{className:e.loading?B.loading+" "+B.nav:B.nav,children:[(0,_.jsx)("p",{ref:t,className:B.logo,children:"French Drillin"}),(0,_.jsx)("button",{className:B.fetchbutton,onClick:e.fetching,children:"Load Songs"}),e.user?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("button",{className:B.user,disabled:!0,children:e.user}),(0,_.jsx)("button",{onClick:e.logoutHandler,className:B.logout,children:"Log Out"})]}):(0,_.jsx)("button",{onClick:e.showForm,className:B.fetchbutton,children:"Register / Login"})]})},T=a(1830),D=a.n(T),G=function(){var e=c.useState(!1),t=(0,o.Z)(e,2),a=t[0],d=t[1],f=c.useState(localStorage.getItem("isLogged")),m=(0,o.Z)(f,2),h=m[0],g=m[1],p=c.useState([]),v=(0,o.Z)(p,2),b=v[0],j=v[1],S=c.useState([]),N=(0,o.Z)(S,2),k=N[0],Z=N[1],L=c.useState([]),w=(0,o.Z)(L,2),C=w[0],I=w[1],A=c.useState(!1),P=(0,o.Z)(A,2),F=P[0],B=P[1],T=c.useState(""),G=(0,o.Z)(T,2),R=G[0],O=G[1],U=localStorage.getItem("isLogged"),V=localStorage.getItem("filtred"),J=c.useCallback((0,s.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(!1),U){e.next=8;break}return Z(""),localStorage.setItem("filtred",""),O("You need to register first!"),e.abrupt("return",null);case 8:if(!(b.length>0&&0===k.length)){e.next=13;break}return Z(b),e.abrupt("return",null);case 13:if(!(k.length>0&&b.length>0)){e.next=16;break}return Z(V?b.filter((function(e){return e.author===V})):b),e.abrupt("return",null);case 16:return d(!1),B(!0),t={method:"GET",headers:{"X-RapidAPI-Key":"8cc775c702msheb62061cb0adb6fp1957fcjsna06b77403272","X-RapidAPI-Host":"spotify23.p.rapidapi.com"}},e.next=21,fetch("https://spotify23.p.rapidapi.com/playlist_tracks/?id=37i9dQZF1DX4Wsb4d7NKfP&offset=0&limit=100",t).then((function(e){return e.json()})).then((function(e){console.log(e);var t=[],a=[];for(var n in e)if("items"===n){var s,o=(0,r.Z)(e[n]);try{for(o.s();!(s=o.n()).done;){var c=s.value;c.track&&(t.push({id:c.track.id,name:c.track.name,authorUrl:c.track.artists[0].uri,author:c.track.artists[0].name,preview:c.track.preview_url,img:c.track.album.images[0].url,url:c.track.external_urls,duration:.001*c.track.duration_ms}),a.push(c.track.artists[0].name))}}catch(i){o.e(i)}finally{o.f()}}var l=[];a.sort(),a.forEach((function(e){l.indexOf(e)<0&&l.push(e)})),I(l),j(t),"All"!==V&&V?Z(t.filter((function(e){return e.author===V}))):(console.log('localFilter == All || ""'),Z(t))}));case 21:B(!1);case 22:case"end":return e.stop()}}),e)}))),[h,V,b]);function K(){return(K=(0,s.Z)((0,n.Z)().mark((function e(t,a,r){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B(!0),d(!1),O(""),r){e.next=16;break}return s={Name:t,Password:a},e.prev=5,e.next=8,fetch("https://react-http-467cc-default-rtdb.firebaseio.com/users.json",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0.message);case 13:D().fire("Registered succesfully!","Hope you enjoy the page!","success"),e.next=17;break;case 16:D().fire("Welcome back "+t+" !","Logged succesfully!","success");case 17:g(t),localStorage.setItem("isLogged",t),B(!1);case 20:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}c.useEffect((function(){U===!!h&&g(U),V&&J()}),[]);return(0,_.jsxs)(c.Fragment,{children:[(0,_.jsx)(H,{loading:F,fetching:J,showForm:function(){d(!0)},logoutHandler:function(){g(""),Z([]),localStorage.setItem("isLogged",""),localStorage.setItem("filtred",""),D().fire("Good bye!","Logged out succesfully!")},user:h}),a?(0,_.jsx)(y,{submitionHandler:function(e,t,a){return K.apply(this,arguments)}}):(0,_.jsxs)("div",{className:F?u:"white-p",children:[k.length>0&&h&&(0,_.jsxs)("div",{className:i,children:[(0,_.jsx)("label",{children:"Filter by artist:"}),(0,_.jsxs)("select",{onChange:function(e){if("All"===e.target.value)Z(b),localStorage.setItem("filtred","");else{var t=b.filter((function(t){return t.author===e.target.value}));Z(t),localStorage.setItem("filtred",e.target.value)}},children:[(0,_.jsx)("option",{value:"All",children:"All"},"All"),C.map((function(e){return(0,_.jsx)("option",{value:e,children:e},e)}))]})]}),F&&!R&&(0,_.jsx)("div",{children:(0,_.jsx)(E,{})}),!R&&0===k.length&&!F&&!a&&(0,_.jsx)("p",{children:"Songs list is empty, load to see them all!"}),R&&(0,_.jsx)("p",{children:R}),(0,_.jsx)("div",{className:l,children:!F&&!a&&k.length>0&&h&&k.map((function(e){return(0,_.jsx)(x,{song:e},e.id)}))})]})]})}},2480:function(){}}]);
//# sourceMappingURL=191.3cfbe088.chunk.js.map
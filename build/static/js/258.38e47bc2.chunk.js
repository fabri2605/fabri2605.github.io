(self.webpackChunkmusic_page=self.webpackChunkmusic_page||[]).push([[258],{2989:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var a=n(8214),r=n(7762),s=n(5861),o=n(885),c=n(2791),l="SongComp_general__y2vRm",i="SongComp_filter__u6C+E",u="SongComp_loading__nKUSa",d="SongComp_cartel__og6A8",m="SongComp_title__89Vpf",f="SongComp_artist__QPCPt",h="SongComp_spol__7q4Qs",g="SongComp_nav__drYrJ",p="SongComp_user__jDJ5E",_="SongComp_logout__9DQer",v="SongComp_fetchbutton__saGV-",x="SongComp_myform__B9yyh",j="MyExtra_pulse__3j3cy",y=n(184),b=function(){return(0,y.jsx)("div",{className:j})},S=function(e){var t=document.getElementsByClassName("player"),n=c.useState(!1),a=(0,o.Z)(n,2),s=a[0],l=a[1];return(0,y.jsxs)("div",{className:d,children:[(0,y.jsx)("p",{className:"numbers",children:function(e){var t=Math.floor(e/60%60),n=e%60;return(t=t<10?"0"+t:t)+":"+(n=n<10?"0"+Math.floor(n):Math.floor(n))}(e.song.duration)}),(0,y.jsx)("img",{onClick:function(n){var a,s=(0,r.Z)(t);try{for(s.s();!(a=s.n()).done;){var o=a.value;o.id===e.song.name?o.play():o.pause()}}catch(c){s.e(c)}finally{s.f()}},alt:e.song.name,src:e.song.img}),s&&(0,y.jsx)(b,{}),(0,y.jsx)("h3",{className:m,children:e.song.name}),(0,y.jsx)("a",{href:e.song.authorUrl,children:(0,y.jsx)("h5",{className:f,children:e.song.author})}),(0,y.jsx)("div",{className:h,children:(0,y.jsx)("a",{href:e.song.url.spotify,children:"Listen it on Spoltify!"})}),(0,y.jsx)("audio",{onPause:function(t){l(!document.getElementById(e.song.name).paused)},id:e.song.name,className:"player",onPlay:function(n){l(!document.getElementById(e.song.name).paused);var a,s=(0,r.Z)(t);try{for(s.s();!(a=s.n()).done;){var o=a.value;o.volume=.1,o.id===e.song.name?o.setAttribute("controls",""):(o.pause(),o.removeAttribute("controls"))}}catch(c){s.e(c)}finally{s.f()}},children:(0,y.jsx)("source",{src:e.song.preview,type:"audio/mpeg"})})]})},k=n(9704),N=n.n(k),C=function(e){var t=c.useState(""),n=(0,o.Z)(t,2),r=n[0],l=n[1],i=c.useState(""),u=(0,o.Z)(i,2),d=u[0],m=u[1],f=c.useState(!1),h=(0,o.Z)(f,2),g=h[0],p=h[1],_=c.useState(!1),v=(0,o.Z)(_,2),j=v[0],b=v[1],S=c.useState(!1),k=(0,o.Z)(S,2),C=k[0],Z=k[1],w=(N().enc.Utf8.parse("b75524255a7f54d2726a951bb39204df"),N().enc.Utf8.parse("1583288699248111"),function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p(!0),n.preventDefault(),!L||!I){t.next=5;break}return t.next=5,fetch("https://react-http-467cc-default-rtdb.firebaseio.com/users.json").then((function(e){return e.json()})).then((function(t){var n=!1;for(var a in t)if(t[a].Name===r){if(t[a].Password!==d)return Z(!0),null;e.submitionHandler(r,d,!0),n=!0}n||e.submitionHandler(r,d,!1)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),L=r.length>3,I=d.length>3;return(0,y.jsxs)("form",{onSubmit:w,className:x,children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"Username:"}),(0,y.jsx)("input",{type:"text",onBlur:function(){p(!0)},onChange:function(e){l(e.target.value.trim())},value:r})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"Password:"}),(0,y.jsx)("input",{type:"password",onBlur:function(){b(!0)},onChange:function(e){N().AES.encrypt(e.target.value.trim(),"PASSWORD");m(e.target.value.trim())},value:d})]}),(0,y.jsx)("button",{type:"submit",children:"Register"}),!L&&g&&(0,y.jsx)("p",{children:"Invalid username!"}),!I&&L&&j&&(0,y.jsx)("p",{children:"Invalid password!"}),C&&(0,y.jsx)("p",{children:"User already in use || incorrect password!"})]})},Z="myLoader_myBody__Cdb12",w="myLoader_middle__2kv+G",L="myLoader_bar__8qo0v",I="myLoader_bar1__CHrKC",A="myLoader_bar2__-ww-0",P="myLoader_bar3__v+8hP",E="myLoader_bar4__SNmKU",R="myLoader_bar5__-0m-y",F="myLoader_bar6__RMa+Y",H="myLoader_bar7__Wk1L8",U="myLoader_bar8__NO77R",B=function(){return(0,y.jsx)("div",{className:Z,children:(0,y.jsxs)("div",{className:w,children:[(0,y.jsx)("div",{className:"".concat(L," ").concat(I)}),(0,y.jsx)("div",{className:"".concat(L," ").concat(A)}),(0,y.jsx)("div",{className:"".concat(L," ").concat(P)}),(0,y.jsx)("div",{className:"".concat(L," ").concat(E)}),(0,y.jsx)("div",{className:"".concat(L," ").concat(R)}),(0,y.jsx)("div",{className:"".concat(L," ").concat(F)}),(0,y.jsx)("div",{className:"".concat(L," ").concat(H)}),(0,y.jsx)("div",{className:"".concat(L," ").concat(U)})]})})},D=function(e){var t=c.createRef();return(0,y.jsxs)("nav",{className:e.loading?u+" "+g:g,children:[(0,y.jsx)("p",{ref:t,children:"French Drillin"}),(0,y.jsx)("button",{className:v,onClick:e.fetching,children:"Load Songs"}),e.user?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("button",{className:p,disabled:!0,children:e.user}),(0,y.jsx)("button",{onClick:e.logoutHandler,className:_,children:"Log Out"})]}):(0,y.jsx)("button",{onClick:e.showForm,className:v,children:"Register / Login"})]})},O=n(1830),K=n.n(O),M=function(){var e=c.useState(!1),t=(0,o.Z)(e,2),n=t[0],d=t[1],m=c.useState(localStorage.getItem("isLogged")),f=(0,o.Z)(m,2),h=f[0],g=f[1],p=c.useState([]),_=(0,o.Z)(p,2),v=_[0],x=_[1],j=c.useState([]),b=(0,o.Z)(j,2),k=b[0],N=b[1],Z=c.useState([]),w=(0,o.Z)(Z,2),L=w[0],I=w[1],A=c.useState(!1),P=(0,o.Z)(A,2),E=P[0],R=P[1],F=c.useState(""),H=(0,o.Z)(F,2),U=H[0],O=H[1],M=localStorage.getItem("isLogged"),G=localStorage.getItem("filtred"),Q=c.useCallback((0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(!1),M){e.next=8;break}return N(""),localStorage.setItem("filtred",""),O("You need to register first!"),e.abrupt("return",null);case 8:if(!(v.length>0&&0===k.length)){e.next=13;break}return N(v),e.abrupt("return",null);case 13:if(!(k.length>0&&v.length>0)){e.next=16;break}return N(G?v.filter((function(e){return e.author===G})):v),e.abrupt("return",null);case 16:return d(!1),R(!0),t={method:"GET",headers:{"X-RapidAPI-Key":"8cc775c702msheb62061cb0adb6fp1957fcjsna06b77403272","X-RapidAPI-Host":"spotify23.p.rapidapi.com"}},e.next=21,fetch("https://spotify23.p.rapidapi.com/playlist_tracks/?id=37i9dQZF1DX4Wsb4d7NKfP&offset=0&limit=100",t).then((function(e){return e.json()})).then((function(e){console.log(e);var t=[],n=[];for(var a in e)if("items"===a){var s,o=(0,r.Z)(e[a]);try{for(o.s();!(s=o.n()).done;){var c=s.value;c.track&&(t.push({id:c.track.id,name:c.track.name,authorUrl:c.track.artists[0].uri,author:c.track.artists[0].name,preview:c.track.preview_url,img:c.track.album.images[0].url,url:c.track.external_urls,duration:.001*c.track.duration_ms}),n.push(c.track.artists[0].name))}}catch(i){o.e(i)}finally{o.f()}}var l=[];n.sort(),n.forEach((function(e){l.indexOf(e)<0&&l.push(e)})),I(l),x(t),"All"!==G&&G?N(t.filter((function(e){return e.author===G}))):(console.log('localFilter == All || ""'),N(t))}));case 21:R(!1);case 22:case"end":return e.stop()}}),e)}))),[h,G,v]);function W(){return(W=(0,s.Z)((0,a.Z)().mark((function e(t,n,r){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!0),d(!1),O(""),r){e.next=16;break}return s={Name:t,Password:n},e.prev=5,e.next=8,fetch("https://react-http-467cc-default-rtdb.firebaseio.com/users.json",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0.message);case 13:K().fire("Registered succesfully!","Hope you enjoy the page!","success"),e.next=17;break;case 16:K().fire("Welcome back "+t+" !","Logged succesfully!","success");case 17:g(t),localStorage.setItem("isLogged",t),R(!1);case 20:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}c.useEffect((function(){M===!!h&&g(M),G&&Q()}),[]);return(0,y.jsxs)(c.Fragment,{children:[(0,y.jsx)(D,{loading:E,fetching:Q,showForm:function(){d(!0)},logoutHandler:function(){g(""),N([]),localStorage.setItem("isLogged",""),localStorage.setItem("filtred",""),K().fire("Good bye!","Logged out succesfully!")},user:h}),n?(0,y.jsx)(C,{submitionHandler:function(e,t,n){return W.apply(this,arguments)}}):(0,y.jsxs)("div",{className:E?u:"white-p",children:[k.length>0&&h&&(0,y.jsxs)("div",{className:i,children:[(0,y.jsx)("label",{children:"Filter by artist:"}),(0,y.jsxs)("select",{onChange:function(e){if("All"===e.target.value)N(v),localStorage.setItem("filtred","");else{var t=v.filter((function(t){return t.author===e.target.value}));N(t),localStorage.setItem("filtred",e.target.value)}},children:[(0,y.jsx)("option",{value:"All",children:"All"},"All"),L.map((function(e){return(0,y.jsx)("option",{value:e,children:e},e)}))]})]}),E&&!U&&(0,y.jsx)("div",{children:(0,y.jsx)(B,{})}),!U&&0===k.length&&!E&&!n&&(0,y.jsx)("p",{children:"Songs list is empty, load to see them all!"}),U&&(0,y.jsx)("p",{children:U}),(0,y.jsx)("div",{className:l,children:!E&&!n&&k.length>0&&h&&k.map((function(e){return console.log(e),(0,y.jsx)(S,{song:e},e.id)}))})]})]})}},2480:function(){}}]);
//# sourceMappingURL=258.38e47bc2.chunk.js.map